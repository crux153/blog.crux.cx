---
title: 아이유 응원봉 색 바꾸기
date: "2019-05-10T05:37:40.970Z"
description: 아이유 공식 응원봉 중앙 제어 프로토콜 역분석
---

[원글 링크](https://gall.dcinside.com/hit/15017)

아이유 공식 응원봉은 기본적으로 네온옐로우 색 밖에는 낼 수가 없는데, 버튼 꾹 눌러서 켜면 네온 옐로우색으로 발광되고, 버튼 누를때마다 깜빡거리는 속도만 달라지는 식이다. 다른 색깔을 내는건 콘서트장에서 중앙 제어 시에만 가능하고, 이외에는 오직 네온옐로우색만 발광이 가능하다.

뭐 중앙 제어 안하는 상황에서는 한가지 색으로 통일하는게 이쁘니까 이해는 가는데... 기능이 있는데 못쓰고 썩히는게 맘에 안들기도 하고 ~~심심해서~~ 응원봉이 처음 나오고 받아본 직후 바로 분해해서 갖고 놀기 시작했다.

당연하겠지만 응원봉 색을 바꾸는 최고의 방법은 콘서트장에서 하는 원격 제어 방식을 직접 구현해서 하는 것으로, 응원봉 개조를 전혀 안하고 색 바꾸기가 가능함.

물론 무식한 방법으로 응원봉 안의 회로를 수정하거나 아예 바꿔치기 해서 색 바꾸는 방법도 있다.

![Xyloband](./images/2.jpg)
> [https://www.instructables.com/id/Hacking-a-Xyloband-With-Arduino/](https://www.instructables.com/id/Hacking-a-Xyloband-With-Arduino/)

이렇게. 사진은 콜드플레이 공연에서 쓰는 Xyloband.

근데 이렇게 하는게 무슨 의미가 있겠는가. 원격 제어를 해보도록 하자.

---

현존하는 응원봉 중앙 제어 방식에는 크게 세가지가 있다.

1. 응원봉을 스마트폰과 블루투스 페어링 후 제어

앱으로 블루투스와 연결해서 쓰는 응원봉이 전부 이 방식이고,
- 응원봉은 스마트폰이랑만 연결되고 스마트폰 - 중앙 서버랑 통신하는 방식이랑
- 스마트폰은 설정용으로만 쓰고 응원봉 - 컨트롤러가 ZigBee나 RF 등등 무선으로 직접 연결되는 방식
으로 또 나뉘는걸로 보인다.

![Lightsticks with area control](./images/1.png)

스마트폰 앱을 통해 좌석 번호를 입력해서 콘서트장에서 각 좌석을 개별로 제어할 수 있고, 이를 이용해서 구역별 색깔, 글자 쓰기 등등 세부적인 연출이 가능하다. 집에서도 스마트폰 앱을 통해 응원봉 색을 바꾸고 놀 수도 있다.

...슬프게도 아이유 응원봉은 이런 기능이 없다. 됐으면 내가 이 글을 안썼겠지

물론 특허도 걸려있고 블루투스도 들어가야되고 앱도 만들어야되니 단가가 비싸지는게 단점

2. 사전에 좌석 정보 등을 응원봉에 저장해두고 컨트롤러로 제어

주로 1회성 행사에서 쓰는 방식이고, 응원봉에 미리 좌석 정보를 심어두고 그걸 자리마다 놔둔 뒤에 컨트롤러로 제어하는 방식.

비싼 블루투스 쓸 필요 없이 구역별, 좌석별 제어가 가능하지만, 1회용이다. 한번 사서 콘서트마다 들고가는 공식 응원봉에는 못써먹는 방식으로, 콜드플레이 내한 공연이랑 가요대전 때 썼던 LED 팔찌가 이 방식으로 보인다.

3. 그런거 없이 컨트롤러 - 응원봉 직접 통신

좌석, 구역별 제어를 포기하고 그냥 중앙에서 컨트롤러가 색상 정보를 뿌리고, 이에 따라 응원봉 색이 바뀌는 방식.

그렇다 아이유 응원봉은 이 방식이다. 뭐 대부분 공식 응원봉은 다 이 방식인거 같긴 하다만...

문제는 통신 방식은 뭘 쓰던 응원봉 만드는놈 마음이라는 것. 알려진 Wi-Fi나 Bluetooth, ZigBee 등의 프로토콜을 쓸 수도 있고, 그냥 RF 써서 맘대로 만들수도 있다.

이게 가장 큰 문제다. 원격 제어를 하고 싶어도 어떤 방식으로 하는지 전혀 모르니 뭘 할 수가 없으니...

---

![XyloShield](./images/3.jpg)
> [https://github.com/StefanKrupop/XyloShield](https://github.com/StefanKrupop/XyloShield)

GitHub를 찾아보면 위에서 말했던 Xyloband를 제어하는 하드웨어 소스가 공개되어 있다. 하지만 위에서 말했듯 통신 방식은 만드는 놈 맘이고 전혀 다르기 때문에 이걸로 아이유 응원봉은 제어가 불가능하다.

그리고 Xyloband 제어용으로 저런걸 만들 수 있는 이유는,

![Xylobands Controller](./images/4.jpg)
> [http://xylobands.com/coldplay-tour-a-head-full-of-dreams/](http://xylobands.com/coldplay-tour-a-head-full-of-dreams/)

바로 Xyloband 만드는 제조사가 아예 컨트롤러를 팔기 때문. GitHub 보고 도면 뽑아서 납땜하는 뻘짓을 하지 않더라도, 그냥 저거 사다가 집에서 갖고 놀면 된다.

...파는걸 그냥 사서 쓰면 되는데 굳이 이걸 사다가 역분석해서 다시 만드는 이유는 이해할 수 없지만 (뭐 재미는 있을거 같긴 한데...) 어찌됐든 아이유 응원봉 컨트롤러를 따로 팔지는 않으므로 매우 접근이 어려워진다.

---

어찌됐든 아이유 응원봉의 통신 방식을 알아내야 되니... 일단 검색을 해보자.

![IU Lightstick Spec](./images/5.jpg)

응원봉을 사면 이렇게 제품 사양이 들어있는데, 원하는 통신 방식 같은건 당연히 보이질 않는다. 누가 그런거까지 적어놓겠냐만...

전파 인증 번호가 보이니 검색을 해본다.

![KC Certification](./images/6.png)

...이게 전부다

![FCC Certification](./images/7.png)

미국의 FCC 인증은 시험 성적서를 공개하고 있어서 위의 사진처럼 통신 주파수, 변조 방식까지 쉽게 얻을 수 있지만, 한국의 전파 인증은 그런거 없다.

아무튼 저기서 얻은 정보는 제품에 표시된 제조사는 휴앤휴지만 실제 인증을 받은 제조사는 비트로라는거다. 

![Bitro](./images/8.png)

비트로를 찾아보니 아이유 말고 다른 아이돌 응원봉도 많이 만들었다.

![Bitro Controller](./images/9.png)

컨트롤러도 있다. 이걸 팔아주면 좋으련만....

![Bitro Homepage](./images/10.png)

홈페이지([http://www.beatro.co.kr](http://www.beatro.co.kr))를 가보니 더 많다.

![Bitro Homepage 2](./images/11.png)

기술 소개 항목이 있어 엄청 기대하고 들어갔는데... 텅 비어있다. -_-

2017년에도 이상태였는데 이 글을 쓰는 2019년까지 이상태인걸 보면 넣을 생각이 없는 모양이다.

---

검색을 통해 얻을 수 있는 정보는 이게 전부인거 같다.

일단 응원봉을 분해해보자.

![IU Lightstick Disassembly](./images/12.jpg)

분해를 했는데.... 기판에 검은색 껌이 보인다 ㅡ.ㅡ

저리 생겨먹은건 Chip On Board 또는 분석을 방해하기 위해 발라놓은건데, 떼려면 열풍기로 가열하면서 칼로 긁어내던가, 아님 강산을 통해 저 부분만 녹이던가 해야된다.

![Chip On Board](./images/13.png)
> [https://www.youtube.com/watch?v=hQ5hXEK35WI](https://www.youtube.com/watch?v=hQ5hXEK35WI)

이렇게...

문제는 저렇게 하면 당연히 응원봉이 망가지고, 다 벗겨내더라도 현미경을 통해 회로를 분석해야 한다.

그래서 저걸 분석하는건 깔끔하게 포기.

칩셋 정보를 안다면 펌웨어를 추출한 다음 리버스엔지니어링 하는 식으로 컨트롤러 없이도 통신 방식이나 패킷 구조를 파악할 수 있다.

![SBS Lightstick](./images/15.jpg)
![TLSR8261 Datasheet](./images/16.png)

예를 들어 SBS 가요대전에서 사용된 LED 팔찌는 TLSR8261 칩을 쓰는데, 해당 칩셋명을 검색해서 Datasheet를 찾으면 세부 사양을 다 알 수 있다.

문제는 아이유 응원봉의 기판에는 저런 칩셋 정보가 전무하다는 것.

그러다가 검색 중 똑같은 제조사에서 만든 박효신 콘서트 팔찌에는 IC가 그대로 보인다는 것을 발견했다.
